!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"level",2)}return function(e,t,r){t&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"setLevel",value:function(e){this.level=e}},{key:"getLevel",value:function(){return this.level}},{key:"debug",value:function(){if(this.level<=e.DEBUG){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=console).debug.apply(t,["[RJ] DEBUG"].concat(n))}}},{key:"info",value:function(){if(this.level<=e.INFO){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=console).info.apply(t,["[RJ] INFO"].concat(n))}}},{key:"warn",value:function(){if(this.level<=e.WARN){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=console).warn.apply(t,["[RJ] WARN"].concat(n))}}},{key:"error",value:function(){if(this.level<=e.ERROR){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=console).error.apply(t,["[RJ] ERROR"].concat(n))}}}]),e}();i(o,"DEBUG",0),i(o,"INFO",1),i(o,"WARN",2),i(o,"ERROR",3),t.a=new o},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(3),o=r(0),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.siteId=null,this.lastRequestUrl=""}return function(e,t,r){t&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"setSiteId",value:function(e){this.siteId=e}},{key:"getSiteId",value:function(){return this.siteId}},{key:"serialize",value:function(e){var t=[];for(var r in e)!function(r){var n=encodeURIComponent(r);Object.prototype.hasOwnProperty.call(e,r)&&void 0!==e[r]&&(Array.isArray(e[r])?e[r].forEach(function(e){return t.push(n+"="+encodeURIComponent(e))}):t.push(n+"="+encodeURIComponent(e[r])))}(r);return t.join("&")}},{key:"get",value:function(e,t){if(this.siteId){t.site_id=this.siteId;var r=t.session_id?"omit":"include";t.session_id=t.session_id||i.a.getSession()||i.a.generateSession();var n=this.serialize(t),a="https://rj2.rejoiner.com/tracker/v4"+e;return n.length>0&&(a+="?"+n),a===this.lastRequestUrl?(o.a.debug("Cannot make duplicate requests!",a),Promise.resolve()):(this.lastRequestUrl=a,fetch(a,{credentials:r}).then(function(e){return e.json().then(function(t){return e.ok?t:Promise.reject(t)}).catch(function(e){return o.a.debug(e)})}).then(function(e){return i.a.getSession()!==e.session_id&&"omit"!==r&&(o.a.debug("Replacing session id"),i.a.addSession(e.session_id)),e}).catch(function(e){return o.a.debug(e)}))}o.a.error('Cannot make request without "setAccount"')}}]),e}();t.a=new a},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.document=t,this.domain=null}return function(e,t,r){t&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"setDomain",value:function(e){this.domain=e}},{key:"isValidDomain",value:function(e){return!!e&&[/^https?:\/\//].every(function(t){return!t.test(e)})}},{key:"cleanDomain",value:function(e){if("string"!=typeof e)return e;var t=e.replace(/^.?https?:\/\//,""),r=t.indexOf("/");return-1!==r?t.substr(0,r):t}},{key:"get",value:function(e){var t=this.document.cookie.match(new RegExp("".concat(e,"=([^;]+)")));if(t)return t[1]}},{key:"add",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.domain||this.domain,i=this.cleanDomain(n);return this.document.cookie=[e,"=",t,r.expires?"; expires=".concat(r.expires.toUTCString()):"",r.path?"; path=".concat(r.path):"; path=/",this.isValidDomain(i)?"; domain=".concat(i):"",r.secure?"; secure":""].join("")}},{key:"remove",value:function(e){this.add(e,"",{expires:new Date("Thu, 01 Jan 1970 00:00:01 GMT")})}},{key:"addSession",value:function(e){var t=new Date;t.setDate(t.getDate()+40),this.add("rj2session",e,{expires:t})}},{key:"getSession",value:function(){return this.get("rj2session")}},{key:"generateSession",value:function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});return this.addSession(e),e}}]),e}();t.a=new i(document)},function(e,t,r){"use strict";t.a=function(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}},function(e,t,r){"use strict";t.a=function(e){return new this(function(t,r){function n(e,r){if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,function(t){n(e,t)},function(r){i[e]={status:"rejected",reason:r},0==--o&&t(i)})}i[e]={status:"fulfilled",value:r},0==--o&&t(i)}if(!e||void 0===e.length)return r(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);for(var o=i.length,a=0;a<i.length;a++)n(a,i[a])})}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1),s=r(0),u=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,63}$/i,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.window=t}return function(e,t,r){t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"isValidDate",value:function(e){return e instanceof Date&&isFinite(e)}},{key:"formatDateToDateField",value:function(e){return this.isValidDate(e)?e.toISOString().split("T")[0]:e}},{key:"saveCustomerEmail",value:function(e){e&&e.email?(e.source||(e.source="api"),a.a.get("/session/email",e),s.a.info("setCustomerEmail:",e)):s.a.error("setCustomerEmail: missing email param")}},{key:"saveCustomerPhone",value:function(e){e&&e.phone?(e.source||(e.source="api"),a.a.get("/session/phone",e),s.a.info("setCustomerPhone:",e)):s.a.error("setCustomerPhone: missing phone param")}},{key:"saveCustomerEmailPhone",value:function(e){e&&e.email&&e.phone?(e.source||(e.source="api"),a.a.get("/session/email_phone",e),s.a.info("setCustomerEmailPhone:",e)):s.a.error("setCustomerEmailPhone: missing email and/or phone param")}},{key:"saveCustomerData",value:function(e){e?(a.a.get("/session/customer",e),s.a.info("setCustomerData:",e)):s.a.error("setCustomerData: missing params")}},{key:"subscribeToList",value:function(e){e&&(e.email&&u.test(e.email)||e.phone)?(a.a.get("/customer/subscribe",e),s.a.info("subscribeToList:",e)):s.a.error("subscribeToList: missing valid email or phone param")}},{key:"customerOptIn",value:function(e){e&&(e.email&&u.test(e.email)||e.phone)?(a.a.get("/customer/opt_in",e),s.a.info("customerOptIn:",e)):s.a.error("customerOptIn: missing valid email or phone param")}},{key:"saveEmailFromQueryString",value:function(){for(var e=this.window.location.search.substring(1).split("&"),t=0;t<e.length;t++){var r=e[t].split("="),n=decodeURIComponent(r[0]),i=decodeURIComponent(r[1]);if("rjnrid"===n||u.test(i)){this.saveCustomerEmail({email:i,source:"qs"});break}}}},{key:"handleEvent",value:function(e){var t=n(e,2),r=t[0],i=t[1];switch(i&&i.birthdate&&(i.birthdate=this.formatDateToDateField(i.birthdate)),r){case"rejoinerInitialized":this.saveEmailFromQueryString();break;case"setCustomerData":this.saveCustomerData(i);break;case"setCustomerEmail":this.saveCustomerEmail(i);break;case"setCustomerPhone":this.saveCustomerPhone(i);break;case"setCustomerEmailPhone":this.saveCustomerEmailPhone(i);break;case"subscribeToList":this.subscribeToList(i);break;case"customerOptIn":this.customerOptIn(i)}}}]),e}();t.a=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(8);var n=r(13),i=(r.n(n),r(14)),o=r(17),a=r(18),s=r(19),u=r(6),c=r(20),l=r(22),f=new i.a(window);f.register(new o.a(window)),f.register(new a.a),f.register(new u.a(window)),f.register(new s.a(window)),f.register(new c.a),f.register(new l.a),f.init()},function(e,t,r){"use strict";(function(e){var t=r(9),n=r(4),i=r(5),o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();"function"!=typeof o.Promise?o.Promise=t.a:(o.Promise.prototype.finally||(o.Promise.prototype.finally=n.a),o.Promise.allSettled||(o.Promise.allSettled=i.a))}).call(t,r(2))},function(e,t,r){"use strict";(function(e){function n(e){return Boolean(e&&void 0!==e.length)}function i(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void u(t.promise,e)}s(t.promise,n)}else(1===e._state?s:u)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"==typeof r)return void l(function(e,t){return function(){e.apply(t,arguments)}}(r,t),e)}e._state=1,e._value=t,c(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t){var r=!1;try{e(function(e){r||(r=!0,s(t,e))},function(e){r||(r=!0,u(t,e))})}catch(e){if(r)return;r=!0,u(t,e)}}var f=r(4),d=r(5),h=setTimeout;o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var r=new this.constructor(i);return a(this,new function(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}(e,t,r)),r},o.prototype.finally=f.a,o.all=function(e){return new o(function(t,r){function i(e,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,function(t){i(e,t)},r)}o[e]=n,0==--a&&t(o)}catch(e){r(e)}}if(!n(e))return r(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);for(var a=o.length,s=0;s<o.length;s++)i(s,o[s])})},o.allSettled=d.a,o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,r){r(e)})},o.race=function(e){return new o(function(t,r){if(!n(e))return r(new TypeError("Promise.race accepts an array"));for(var i=0,a=e.length;i<a;i++)o.resolve(e[i]).then(t,r)})},o._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){h(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=o}).call(t,r(10).setImmediate)},function(e,t,r){(function(e){function n(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new n(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new n(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(11),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,r(2))},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){delete s[e]}function i(e){if(u)setTimeout(i,0,e);else{var t=s[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{n(e),u=!1}}}}if(!e.setImmediate){var o,a=1,s={},u=!1,c=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick(function(){i(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&i(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),o=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},o=function(t){e.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;o=function(t){var r=c.createElement("script");r.onreadystatechange=function(){i(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():o=function(e){setTimeout(i,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return s[a]=n,o(a),a++},l.clearImmediate=n}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(2),r(12))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(){y&&d&&(y=!1,d.length?h=d.concat(h):p=-1,h.length&&a())}function a(){if(!y){var e=i(o);y=!0;for(var t=h.length;t;){for(d=h,h=[];++p<t;)d&&d[p].run();p=-1,t=h.length}d=null,y=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var c,l,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var d,h=[],y=!1,p=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new s(e,t)),1!==h.length||y||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return h.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function s(e){var t=new FileReader,r=a(t);return t.readAsArrayBuffer(e),r}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(h.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(h.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(h.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(h.arrayBuffer&&h.blob&&p(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!h.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!m(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=a(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e,t){var r=(t=t||{}).body;if(e instanceof l){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=function(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function d(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var h={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(h.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=function(e){return e&&DataView.prototype.isPrototypeOf(e)},m=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,n){e=t(e),n=r(n);var i=this.map[e];this.map[e]=i?i+","+n:n},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,n){this.map[t(e)]=r(n)},i.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},h.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this,{body:this._bodyInit})},c.call(l.prototype),c.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},d.error=function(){var e=new d(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];d.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new d(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=l,e.Response=d,e.fetch=function(e,t){return new Promise(function(r,n){var o=new l(e,t),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:function(e){var t=new i;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t}(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;r(new d(t,e))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&h.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(3),o=r(1),a=r(0),s=r(15),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.window=t,this.providers=[]}return function(e,t,r){t&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"register",value:function(e){this.providers.push(e)}},{key:"init",value:function(){var e=this;try{var t=this.window._rejoiner||[];if(this.window._rejoiner_initialized)return;for(var r=new s.a,n=0;n<t.length;n++)r.handleEvent(t[n],this.window);for(var u=0;u<t.length;u++)!function(r){var n=t[r];e.providers.forEach(function(e){return e.handleEvent(n)})}(u);var c=t.push,l=this;t.push=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(c.apply(t,n);this.length>300;)this.shift();r.handleEvent(n[0]),l.providers.forEach(function(e){return e.handleEvent(n[0])})},Object.defineProperty(t,"siteId",{get:function(){return o.a.getSiteId()}}),Object.defineProperty(t,"sessionId",{get:function(){return i.a.getSession()}}),Object.defineProperty(t,"logLevel",{get:function(){return a.a.getLevel()}}),t.push(["rejoinerInitialized"]),this.window._rejoiner_initialized=!0}catch(e){a.a.error(e.message)}}}]),e}();!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(u,"version","4.2.0"),t.a=u},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(3),s=r(16),u=r(1),c=r(0),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"handleEvent",value:function(e,t){var r=n(e,2),i=r[0],o=r[1];switch(i){case"setAccount":u.a.setSiteId(o),s.a.checkActiveForms(o,t);break;case"setDomain":a.a.setDomain(o);break;case"rjDebug":c.a.setLevel(0);break;case"rjVerbose":c.a.setLevel(1)}}}]),e}();t.a=l},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.checked=!1}return function(e,t,r){t&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"checkActiveForms",value:function(e,t){var r=this;if(!this.checked)return fetch("https://forms.rejoiner.com/api/v1/"+e).then(function(e){if(r.checked=!0,e.ok&&204!==e.status){var n=t.document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://cdn.rejoiner.com/js/v4/forms.js";var i=t.document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}})}}]),e}();t.a=new i},function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(1),u=r(0),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.window=t,this.url=this.window.location.href,this.enabled=!0}return function(e,t,r){t&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"handlePageViewParams",value:function(e){void 0!==e.url?this.window._rejoiner_initialized?this.savePageView(e.url):this.url=e.url:u.a.error("trackPageView: missing required url param")}},{key:"savePageView",value:function(e){this.enabled&&(s.a.get("/page-view/create",{url:e}),u.a.info("savePageView:",e))}},{key:"handleEvent",value:function(e){var t=i(e,2),r=t[0],o=t[1];switch(r){case"rejoinerInitialized":this.savePageView(this.url);break;case"trackPageView":switch(n(o)){case"boolean":this.enabled=o;break;case"object":this.handlePageViewParams(o);break;default:u.a.error("trackPageView: invalid params")}break;case"addPageView":this.handlePageViewParams(o)}}}]),e}();t.a=c},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1),s=r(0),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"saveProductView",value:function(e){void 0!==e&&void 0!==e.product_id?(a.a.get("/product/create",e),s.a.info("trackProductView:",e)):s.a.error("trackProductView: missing product_id parameter")}},{key:"handleEvent",value:function(e){var t=n(e,2),r=t[0],i=t[1];switch(r){case"trackProductView":this.saveProductView(i)}}}]),e}();t.a=u},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1),s=r(0),u=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"onInputBlur",function(e){var t=e.target||e.srcElement;r.handleInputBlur(t)}),this.window=t,this.enabled=!0,this.includeFormIds=[],this.includeFieldIds=[],this.includeFieldNames=[],this.excludeFieldIds=[],this.excludeFieldNames=[]}return function(e,t,r){t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"isValidTagType",value:function(e){return"textarea"===e||"input"===e}},{key:"isValidField",value:function(e){return!(this.includeFormIds.length>0&&-1===this.includeFormIds.indexOf(e.form.id)||this.includeFieldIds.length>0&&-1===this.includeFieldIds.indexOf(e.id)||this.includeFieldNames.length>0&&-1===this.includeFieldNames.indexOf(e.name)||this.excludeFieldIds.length>0&&-1!==this.excludeFieldIds.indexOf(e.id)||this.excludeFieldNames.length>0&&-1!==this.excludeFieldNames.indexOf(e.name)||-1!==["password","button","submit"].indexOf(e.type))}},{key:"isValidValue",value:function(e){return!(!isNaN(e)&&!this.trackNumbers||this.isCC(e))}},{key:"isCC",value:function(e){return e.match(/^((4\d{3})|(5[1-5]\d{2})|(6011)|(7\d{3}))-?\d{4}-?\d{4}-?\d{4}|3[4,7]\d{13}$/)||e.match(/\b(?:\d[ -]*?){13,16}\b/)||e.match(/^([0-6]\d{2}|7[0-6]\d|77[0-2])([ \-]?)(\d{2})\2(\d{4})$/)}},{key:"handleInputBlur",value:function(e){try{if(e){var t={name:e.name,value:e.value};if(!e.tagName||!this.isValidTagType(e.tagName.toLowerCase()))return;if(!this.isValidField(e))return;if(!this.isValidValue(e.value))return;e.form&&e.form.id&&(t.form_id=e.form.id),a.a.get("/form-field/create",t),s.a.debug("inputBlur:",t)}}catch(e){s.a.error(e.message)}}},{key:"formTracking",value:function(e){if(void 0!==e&&(this.enabled=!!e),this.window.document.addEventListener){var t=this.enabled?"addEventListener":"removeEventListener";this.window.document[t]("blur",this.onInputBlur,!0)}else if(this.window.document.attachEvent){var r=this.enabled?"attachEvent":"detachEvent";this.window.document[r]("onfocusout",this.onInputBlur)}s.a.info("Form Tracking set to:",this.enabled)}},{key:"handleEvent",value:function(e){var t=n(e,2),r=t[0],i=t[1];switch(r){case"rejoinerInitialized":this.formTracking();break;case"formTracking":this.formTracking(i);break;case"setIncludeOnlyFormID":this.includeFormIds=i;break;case"setIncludeOnlyFieldID":this.includeFieldIds=i;break;case"setIncludeOnlyFieldName":this.includeFieldNames=i;break;case"setExcludeFieldID":this.excludeFieldIds=i;break;case"setExcludeFieldName":this.excludeFieldNames=i;break;case"trackNumbers":this.trackNumbers=!0}}}]),e}();t.a=u},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1),s=r(0),u=r(21),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):e[t]=null}(this,"clearCartPromise")}return function(e,t,r){t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"clearCartData",value:function(){return s.a.info("clearCartData"),this.clearCartPromise=a.a.get("/cart-data/clear",{}),this.clearCartPromise}},{key:"removeCartItem",value:function(e){return s.a.info("removeCartItem",e),a.a.get("/cart-item/remove",e)}},{key:"setCartData",value:function(e){s.a.info("setCartData",e);var t=u.a.transformTags(e);return null!==this.clearCartPromise?this.clearCartPromise.finally(function(){return a.a.get("/cart-data/set",t)}):a.a.get("/cart-data/set",t)}},{key:"addCartItem",value:function(e){void 0===e.product_id&&s.a.error("addCartItem missing required product_id param"),void 0===e.category||Array.isArray(e.category)||(e.category=[e.category]),s.a.info("setCartItem",e);var t=u.a.transformTags(e);return null!==this.clearCartPromise?this.clearCartPromise.finally(function(){return a.a.get("/cart-item/add",t)}):a.a.get("/cart-item/add",t)}},{key:"sendConversion",value:function(e){s.a.info("sendConversion",e);var t=[];if(e){if(e.cart_data){var r=u.a.transformTags(e.cart_data);t.push(this.setCartData(r))}if(e.cart_items)for(var n=0;n<e.cart_items.length;n++){var i=u.a.transformTags(e.cart_items[n]);t.push(this.addCartItem(i))}}return Promise.all(t).finally(function(){s.a.debug("Finished all cart-data and cart-items requests"),a.a.get("/order/convert",{})})}},{key:"handleEvent",value:function(e){var t=n(e,2),r=t[0],i=t[1];switch(r){case"clearCartData":return this.clearCartData();case"removeCartItem":return this.removeCartItem(i);case"setCartItem":return this.addCartItem(i);case"setCartData":return this.setCartData(i);case"startNewOrder":return void s.a.warn("startNewOrder is deprecated. Use setCartData instead.");case"sendConversion":return this.sendConversion(i)}}}]),e}();t.a=c},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=r(6),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"convertToCents",value:function(e){return"".concat(e).includes(".")?Math.round(100*e):e}},{key:"transformTags",value:function(e){return e&&"object"===a(e)?(e.email&&(new u.a).saveCustomerEmail({email:e.email}),i(i({},e),{},{email:void 0,return_url:e.return_url||e.returnUrl,returnUrl:void 0,cart_item_count:e.cart_item_count||e.totalItems,totalItems:void 0,cart_value:this.convertToCents(e.cart_value||e.value),value:void 0,price:this.convertToCents(e.price),qty_price:this.convertToCents(e.qty_price)})):e}}]),e}();t.a=new c},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,"a",function(){return u});var a=r(1),s=r(0),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"setSessionMetadata",value:function(e){e?(a.a.get("/session/metadata",e),s.a.info("setSessionMetadata:",e)):s.a.error("setSessionMetadata: missing params")}},{key:"setSessionDate",value:function(e){e&&(e.delivery_date||e.payment_date||e.fulfillment_date)?(a.a.get("/session/date",e),s.a.info("setSessionDate:",e)):s.a.error("setSessionDate: missing one of [`delivery_date`, `payment_date`, `fulfillment_date`] params")}},{key:"handleEvent",value:function(e){var t=n(e,2),r=t[0],i=t[1];switch(r){case"setSessionMetadata":this.setSessionMetadata(i);break;case"setSessionDate":this.setSessionDate(i)}}}]),e}()}]);